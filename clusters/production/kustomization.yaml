# Production Cluster Root Kustomization
# Flux-first architecture: Bootstrap via Terraform, infrastructure via GitOps

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Cluster-wide variables for service endpoints (used by substituteFrom)
  - cluster-vars.yaml
  # Flux Kustomization resources that define dependency order
  - sources.yaml
  - vault-operator.yaml
  - vault.yaml
  - external-secrets.yaml
  - flux-secrets.yaml
  - ingress-nginx.yaml
  - pvc

# Global labels for all resources
# NOTE: includeSelectors: false to avoid modifying immutable deployment selectors
labels:
- includeSelectors: false
  pairs:
    cluster: production
    managed-by: flux

# Global annotations
commonAnnotations:
  cluster: production
  environment: homelab
